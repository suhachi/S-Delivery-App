# ğŸ“œ KS Simple App: í‘œì¤€ ëŸ°ì¹­ ìš´ì˜ ì ˆì°¨ì„œ (SOP)

**ë¬¸ì„œ ë²ˆí˜¸**: SOP-2025-001
**ì ìš© ëŒ€ìƒ**: ëª¨ë“  ì‹ ê·œ í´ë¼ì´ì–¸íŠ¸(ì ì£¼) ì•± êµ¬ì¶• ë° ë°°í¬
**ëª©ì **: ìˆ˜ì£¼(ì˜ë¢°)ë¶€í„° ëŸ°ì¹­(ì „ë‹¬)ê¹Œì§€ì˜ ê³¼ì •ì„ "ê·œì¹™í™”"í•˜ì—¬ ì‘ì—…ì ê°„ ì˜¤ì°¨ë¥¼ ì—†ì• ê³  í’ˆì§ˆì„ ë³´ì¦í•¨.

---

## ğŸ—ï¸ Phase 1: ìˆ˜ì£¼ ë° ì •ë³´ ìˆ˜ì§‘ (Client Intake)

ì‘ì—… ì‹œì‘ ì „, ë°˜ë“œì‹œ ì•„ë˜ "í‘œì¤€ ì˜ë¢°ì„œ"ë¥¼ ì‘ì„±í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ ì •ë³´ë¥¼ í™•ì •í•´ì•¼ í•©ë‹ˆë‹¤.
**ì •ë³´ê°€ ëˆ„ë½ë˜ë©´ ì‘ì—…ì„ ì‹œì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**

### [Form] ì‹ ê·œ ìƒì  êµ¬ì¶• ì˜ë¢°ì„œ
| í•­ëª© | ê¸°ì… ìš”ë ¹ | ì…ë ¥ ê°’ (ì˜ˆì‹œ) |
| :--- | :--- | :--- |
| **ìƒí˜¸ëª… (í•œê¸€)** | ì•± íƒ€ì´í‹€, ë¬¸ì„œ ì œëª© | `ë¼ì´ì˜¥ ìŒ€êµ­ìˆ˜` |
| **ìƒí˜¸ëª… (ì˜ë¬¸)** | í”„ë¡œì íŠ¸ ID, ë¦¬í¬ì§€í† ë¦¬ëª…ì— ì‚¬ìš© (ë„ì–´ì“°ê¸° ì—†ì´) | `rye-oak` |
| **ê´€ë¦¬ì ì´ë©”ì¼** | ì ì£¼ê°€ ì‚¬ìš©í•  ë¡œê·¸ì¸ ID | `owner@ryeoak.com` |
| **ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸** | ì´ˆê¸° ì„¸íŒ…ìš© (ì „ë‹¬ í›„ ë³€ê²½ ì•ˆë‚´) | `ryeoak1234!` |
| **ì‚¬ì—…ì ë²ˆí˜¸** | PG ê³„ì•½ í™•ì¸ìš© (ì—†ìœ¼ë©´ 'ë¯¸ì •') | `000-00-00000` |
| **ë¡œê³  íŒŒì¼** | `logo.png` (512x512 ê¶Œì¥) | (íŒŒì¼ ì²¨ë¶€) |

---

## ğŸ› ï¸ Phase 2: í”„ë¡œì íŠ¸ ìƒì„± ë° í™˜ê²½ êµ¬ì„± (Setup Protocol)

### Rule 0: "ë¶ˆë³€ì˜ ë²•ì¹™" (Immutable Rules)
1.  **í…œí”Œë¦¿ ì½”ë“œëŠ” ìˆ˜ì •í•˜ì§€ ì•ŠëŠ”ë‹¤**: í…œí”Œë¦¿(`simple-delivery-app`) v1.0.0 íƒœê·¸ë¥¼ ê·¸ëŒ€ë¡œ cloneí•œë‹¤.
2.  **í”„ë¡œì íŠ¸ ID ê·œì¹™**: `simple-delivery-[ì˜ë¬¸ìƒí˜¸]` ë˜ëŠ” `[ì˜ë¬¸ìƒí˜¸]-app` í˜•ì‹ì„ ë”°ë¥¸ë‹¤.
3.  **ê²°ì œ OFF ì›ì¹™**: ì´ˆê¸° ë°°í¬ ì‹œ `.env`ì˜ `NICEPAY_CLIENT_ID`ëŠ” ë°˜ë“œì‹œ ë¹„ì›Œë‘”ë‹¤.

### Step 2-1: ë¦¬í¬ì§€í† ë¦¬ ë³µì œ (Clone)
```bash
# 1. í´ë” ìƒì„± (ê·œì¹™: simple-delivery-shop-[ì˜ë¬¸ìƒí˜¸])
mkdir simple-delivery-shop-rye-oak
cd simple-delivery-shop-rye-oak

# 2. í…œí”Œë¦¿ v1.0.0 ê°€ì ¸ì˜¤ê¸° (ì ˆëŒ€ HEADë¥¼ ê°€ì ¸ì˜¤ì§€ ë§ ê²ƒ)
git init
git remote add template https://github.com/KS-Company/simple-delivery-template.git
git fetch template --tags
git checkout tags/simple-delivery-v1.0.0 -b main

# 3. í…œí”Œë¦¿ ì—°ê²° í•´ì œ
git remote remove template
```

### Step 2-2: Firebase í”„ë¡œì íŠ¸ ìƒì„± (Console)
1.  **í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°**: IDëŠ” `rye-oak-app` (ì˜ˆì‹œ)
2.  **í•„ìˆ˜ í™œì„±í™” í•­ëª©**:
    - **Authentication**: ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸
    - **Firestore**: í”„ë¡œë•ì…˜ ëª¨ë“œ (ë°ì´í„° ì—†ìŒ)
    - **Storage**: ê¸°ë³¸ ë²„í‚·
    - **Functions**: Blaze ìš”ê¸ˆì œ ì—…ê·¸ë ˆì´ë“œ (í•„ìˆ˜)

### Step 2-3: í™˜ê²½ ì—°ê²° (Config)
1.  **`.firebaserc` ì‘ì„±**:
    ```json
    { "projects": { "default": "rye-oak-app" } }
    ```
2.  **`.env` ì‘ì„±**:
    - í…œí”Œë¦¿ì˜ `.env.template` ë³µì‚¬.
    - `VITE_FIREBASE_Config` ê°’ êµì²´.
    - `VITE_NICEPAY_CLIENT_ID=""` **(ìœ ì§€)**

---

## ğŸš€ Phase 3: ë°°í¬ ë° ì´ˆê¸°í™” (Deploy & Init)

### Step 3-1: ì•ˆì „ ì ê²€ (Safety Check)
ë°°í¬ ì „ ìŠ¤í¬ë¦½íŠ¸ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ë§Œ, ì‘ì—…ìë„ ëˆˆìœ¼ë¡œ í™•ì¸í•´ì•¼ í•¨.
```bash
npm run firebase:login  # ê³„ì • í™•ì¸ (jsbae59@gmail.com)
```

### Step 3-2: ì¸í”„ë¼ ë°°í¬ (Backend)
```bash
npm run firebase:deploy:firestore
npm run firebase:deploy:storage
npm run firebase:deploy:functions
```

### Step 3-3: ê´€ë¦¬ì ê³„ì • ì£¼ì… (Seed)
1.  Firebase Console > Authentication > ìœ ì € ì¶”ê°€ (`owner@ryeoak.com`)
2.  Firestore > `admins` ì»¬ë ‰ì…˜ > ë¬¸ì„œ ì¶”ê°€ (ID: ìœ ì €UID)
    - í•„ë“œ: `role: "admin"` (ë¬¸ìì—´)
    - *ì´ ê³¼ì •ì„ ê±°ì³ì•¼ ì ì£¼ê°€ ë¡œê·¸ì¸ ì‹œ "ê´€ë¦¬ì"ë¡œ ì¸ì‹ë¨.*

### Step 3-4: ì•± ë°°í¬ (Frontend)
```bash
npm run build
npm run firebase:deploy:hosting
```

---

## ğŸ“¦ Phase 4: ê²€ìˆ˜ ë° ì „ë‹¬ (QA & Handover)

### Step 4-1: "ë¹ˆ ê»ë°ê¸°" ê²€ì¦
1.  ê´€ë¦¬ì URL (`https://rye-oak-app.web.app/admin`) ì ‘ì†.
2.  ì ì£¼ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸.
3.  âœ… **[ìƒì  ì„¤ì • ë§ˆë²•ì‚¬] í™”ë©´ì´ ëœ¨ëŠ”ê°€?** (ì„±ê³µ)
4.  âŒ ëŒ€ì‹œë³´ë“œê°€ ëœ¨ê±°ë‚˜ ì—ëŸ¬ê°€ ë‚˜ë©´? -> DB ì´ˆê¸°í™” ì‹¤íŒ¨ì„. `stores` ì»¬ë ‰ì…˜ ì‚­ì œ í›„ ì¬ì‹œë„.

### Step 4-2: ì „ë‹¬ íŒ¨í‚¤ì§€ ë°œì†¡
í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì•„ë˜ ë‚´ìš©ì„ ë³µì‚¬í•´ì„œ ì „ë‹¬í•¨.

> **[ì „ë‹¬] "ë¼ì´ì˜¥ ìŒ€êµ­ìˆ˜" ì£¼ë¬¸ì•± ì„¸íŒ… ì™„ë£Œ**
>
> 1. **ì•± ì ‘ì† ì£¼ì†Œ (ê³ ê°ìš©)**: `https://rye-oak-app.web.app`
> 2. **ê´€ë¦¬ì ì£¼ì†Œ (ì ì£¼ìš©)**: `https://rye-oak-app.web.app/admin`
> 3. **ë¡œê·¸ì¸ ì •ë³´**: `owner@ryeoak.com` / `ryeoak1234!`
>
> **[ì‹œì‘í•˜ê¸°]**: ê´€ë¦¬ì í˜ì´ì§€ì— ë¡œê·¸ì¸í•˜ì‹œë©´ 'ìƒì  ì„¤ì •' í™”ë©´ì´ ë‚˜ì˜µë‹ˆë‹¤. ìƒì  ì •ë³´ì™€ ë©”ë‰´ë¥¼ ë“±ë¡í•´ì£¼ì„¸ìš”.
> ë©”ë‰´ ë“±ë¡ì´ ëë‚˜ë©´ NICEPAY í‚¤ë¥¼ ì „ë‹¬í•´ì£¼ì„¸ìš”. ê²°ì œ ê¸°ëŠ¥ì„ ì¼œë“œë¦¬ê² ìŠµë‹ˆë‹¤.

---

## ğŸ”’ Phase 5: ìš´ì˜ ì „í™˜ (Activation)

**ì¡°ê±´**: ì ì£¼ê°€ ë©”ë‰´ ë“±ë¡ ì™„ë£Œ + NICEPAY ê³„ì•½ ì™„ë£Œ ì‹œ ì§„í–‰.

1.  **í‚¤ ìˆ˜ë ¹**: `Client Key`, `Secret Key`
2.  **í™˜ê²½ ì ìš©**:
    - `.env`: `VITE_NICEPAY_CLIENT_ID="...Key..."`
    - Functions: `firebase functions:config:set nicepay.secret_key="...Key..."`
3.  **ìµœì¢… ë°°í¬**: `npm run build && npm run firebase:deploy`
4.  **ì™„ë£Œ ì„ ì–¸**: "ì •ì‹ ì˜¤í”ˆë˜ì—ˆìŠµë‹ˆë‹¤."
